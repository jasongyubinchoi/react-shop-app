{"ast":null,"code":"import _defineProperty from \"/Users/jasonchoi/Downloads/2022Spring/ECE4723/nailNetGitRepo/react-shop-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/jasonchoi/Downloads/2022Spring/ECE4723/nailNetGitRepo/react-shop-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/jasonchoi/Downloads/2022Spring/ECE4723/nailNetGitRepo/react-shop-app/client/src/components/views/LandingPage/LandingPage.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState } from \"react\";\nimport Axios from \"axios\";\nimport { Icon, Col, Card, Row } from \"antd\";\nimport ImageSlider from \"../../utils/ImageSlider\";\nimport 'antd/dist/antd.css';\nimport RadioBox from \"./LandingPage/Selections/RadioBox\";\nimport CheckBox from \"./LandingPage/Selections/CheckBox\";\nimport { filterData } from \"./LandingPage/Sections/Datas\";\nimport SearchFeature from \"./LandingPage/Selections/SearchFeature\";\nconst Meta = Card.Meta;\n\nfunction LandingPage() {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        Products = _useState2[0],\n        setProducts = _useState2[1];\n\n  const _useState3 = useState(0),\n        _useState4 = _slicedToArray(_useState3, 2),\n        Skip = _useState4[0],\n        setSkip = _useState4[1];\n\n  const _useState5 = useState(8),\n        _useState6 = _slicedToArray(_useState5, 2),\n        Limit = _useState6[0],\n        setLimit = _useState6[1];\n\n  const _useState7 = useState(),\n        _useState8 = _slicedToArray(_useState7, 2),\n        PostSize = _useState8[0],\n        setPostSize = _useState8[1];\n\n  const _useState9 = useState(\"\"),\n        _useState10 = _slicedToArray(_useState9, 2),\n        SearchTerms = _useState10[0],\n        setSearchTerms = _useState10[1];\n\n  const _useState11 = useState({\n    lengths: [],\n    locations: [],\n    services: [],\n    environments: [],\n    ratings: [],\n    shapes: [],\n    types: [],\n    enhancementExtensions: [],\n    nailArts: []\n  }),\n        _useState12 = _slicedToArray(_useState11, 2),\n        Filters = _useState12[0],\n        setFilters = _useState12[1];\n\n  useEffect(() => {\n    const variables = {\n      skip: Skip,\n      limit: Limit\n    };\n    getProducts(variables);\n  }, []);\n\n  const getProducts = variables => {\n    Axios.post(\"/api/product/getProducts\", variables).then(response => {\n      if (response.data.success) {\n        if (variables.loadMore) {\n          setProducts([...Products, ...response.data.products]);\n        } else {\n          setProducts(response.data.products);\n        }\n\n        setPostSize(response.data.postSize);\n      } else {\n        alert(\"Failed to fectch product datas\");\n      }\n    });\n  };\n\n  const onLoadMore = () => {\n    let skip = Skip + Limit;\n    const variables = {\n      skip: skip,\n      limit: Limit,\n      loadMore: true,\n      filters: Filters,\n      searchTerm: SearchTerms\n    };\n    getProducts(variables);\n    setSkip(skip);\n  };\n\n  const renderCards = Products.map((product, index) => {\n    return React.createElement(Col, {\n      lg: 6,\n      md: 8,\n      xs: 24,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(Card, {\n      hoverable: true,\n      cover: React.createElement(\"a\", {\n        href: \"/product/\".concat(product._id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, \" \", React.createElement(ImageSlider, {\n        images: product.images,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(Meta, {\n      title: product.title,\n      description: \"$\".concat(product.price),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    })));\n  });\n\n  const showFilteredResults = filters => {\n    const variables = {\n      skip: 0,\n      limit: Limit,\n      filters: filters\n    };\n    getProducts(variables);\n    setSkip(0);\n  };\n\n  const handleRadio = (value, category) => {\n    const data = filterData[category];\n    let array = [];\n\n    for (let key in data) {\n      if (data[key].id === parseInt(value, 10)) {\n        array = data[key].array;\n      }\n    }\n\n    console.log(\"array\", array);\n    return array;\n  };\n\n  const handleFilters = (filters, category, filterType) => {\n    const newFilters = _objectSpread({}, Filters);\n\n    newFilters[category] = filters;\n\n    if (filterType === \"RadioBox\") {\n      let priceValues = handleRadio(filters, category);\n      newFilters[category] = priceValues;\n    }\n\n    console.log(newFilters);\n    showFilteredResults(newFilters);\n    setFilters(newFilters);\n  };\n\n  const updateSearchTerms = newSearchTerm => {\n    const variables = {\n      skip: 0,\n      limit: Limit,\n      filters: Filters,\n      searchTerm: newSearchTerm\n    };\n    setSkip(0);\n    setSearchTerms(newSearchTerm);\n    getProducts(variables);\n  };\n\n  return React.createElement(\"div\", {\n    style: {\n      width: \"75%\",\n      margin: \"3rem auto\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    style: {\n      textAlign: \"center\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141\n    },\n    __self: this\n  }), React.createElement(Row, {\n    gutter: [16, 16],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146\n    },\n    __self: this\n  }, React.createElement(Col, {\n    lg: 5,\n    xs: 10,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147\n    },\n    __self: this\n  }, React.createElement(RadioBox, {\n    list: filterData[\"services\"],\n    title: \"Service\",\n    filterType: \"radioBox\",\n    handleFilters: filters => handleFilters(filters, \"services\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148\n    },\n    __self: this\n  })), React.createElement(Col, {\n    lg: 5,\n    xs: 10,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153\n    },\n    __self: this\n  }, React.createElement(RadioBox, {\n    list: filterData[\"locations\"],\n    title: \"Location\",\n    filterType: \"radioBox\",\n    handleFilters: filters => handleFilters(filters, \"locations\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154\n    },\n    __self: this\n  })), React.createElement(Col, {\n    lg: 5,\n    xs: 10,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159\n    },\n    __self: this\n  }, React.createElement(RadioBox, {\n    list: filterData[\"environments\"],\n    title: \"Environment\",\n    filterType: \"radioBox\",\n    handleFilters: filters => handleFilters(filters, \"environments\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160\n    },\n    __self: this\n  }))), React.createElement(Row, {\n    gutter: [16, 16],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167\n    },\n    __self: this\n  }, React.createElement(Col, {\n    lg: 5,\n    xs: 10,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168\n    },\n    __self: this\n  }, React.createElement(CheckBox, {\n    list: filterData[\"lengths\"],\n    title: \"Length\",\n    handleFilters: filters => handleFilters(filters, \"lengths\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169\n    },\n    __self: this\n  })), React.createElement(Col, {\n    lg: 5,\n    xs: 10,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174\n    },\n    __self: this\n  }, React.createElement(RadioBox, {\n    list: filterData[\"shapes\"],\n    title: \"Shape\",\n    filterType: \"radioBox\",\n    handleFilters: filters => handleFilters(filters, \"shapes\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175\n    },\n    __self: this\n  })), React.createElement(Col, {\n    lg: 5,\n    xs: 10,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180\n    },\n    __self: this\n  }, React.createElement(RadioBox, {\n    list: filterData[\"types\"],\n    title: \"Types\",\n    filterType: \"radioBox\",\n    handleFilters: filters => handleFilters(filters, \"types\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181\n    },\n    __self: this\n  }))), React.createElement(Row, {\n    gutter: [16, 16],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188\n    },\n    __self: this\n  }, React.createElement(Col, {\n    lg: 5,\n    xs: 10,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189\n    },\n    __self: this\n  }, React.createElement(RadioBox, {\n    filterType: \"radioBox\",\n    list: filterData[\"enhancementExtensions\"],\n    title: \"Enhancement Extension\",\n    handleFilters: filters => handleFilters(filters, \"enhancementExtension\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190\n    },\n    __self: this\n  })), React.createElement(Col, {\n    lg: 5,\n    xs: 10,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195\n    },\n    __self: this\n  }, React.createElement(RadioBox, {\n    filterType: \"radioBox\",\n    list: filterData[\"ratings\"],\n    title: \"Rating\",\n    handleFilters: filters => handleFilters(filters, \"ratings\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196\n    },\n    __self: this\n  })), React.createElement(Col, {\n    lg: 5,\n    xs: 10,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201\n    },\n    __self: this\n  }, React.createElement(RadioBox, {\n    filterType: \"radioBox\",\n    list: filterData[\"nailArts\"],\n    title: \"Nail Art\",\n    handleFilters: filters => handleFilters(filters, \"nailArts\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      justifyContent: \"flex-end\",\n      margin: \"1rem auto\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210\n    },\n    __self: this\n  }, React.createElement(SearchFeature, {\n    refreshFunction: updateSearchTerms,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217\n    },\n    __self: this\n  })), Products.length === 0 ? React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      height: \"300px\",\n      justifyContent: \"center\",\n      alignItems: \"center\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229\n    },\n    __self: this\n  }, \"No post yet...\")) : React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232\n    },\n    __self: this\n  }, React.createElement(Row, {\n    gutter: [16, 16],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233\n    },\n    __self: this\n  }, renderCards)), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237\n    },\n    __self: this\n  }), PostSize >= Limit && React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      justifyContent: \"center\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    onClick: onLoadMore,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241\n    },\n    __self: this\n  }, \"Load More\")));\n}\n\nexport default LandingPage; // phase1 search box and filter open","map":{"version":3,"sources":["/Users/jasonchoi/Downloads/2022Spring/ECE4723/nailNetGitRepo/react-shop-app/client/src/components/views/LandingPage/LandingPage.js"],"names":["React","useEffect","useState","Axios","Icon","Col","Card","Row","ImageSlider","RadioBox","CheckBox","filterData","SearchFeature","Meta","LandingPage","Products","setProducts","Skip","setSkip","Limit","setLimit","PostSize","setPostSize","SearchTerms","setSearchTerms","lengths","locations","services","environments","ratings","shapes","types","enhancementExtensions","nailArts","Filters","setFilters","variables","skip","limit","getProducts","post","then","response","data","success","loadMore","products","postSize","alert","onLoadMore","filters","searchTerm","renderCards","map","product","index","_id","images","title","price","showFilteredResults","handleRadio","value","category","array","key","id","parseInt","console","log","handleFilters","filterType","newFilters","priceValues","updateSearchTerms","newSearchTerm","width","margin","textAlign","display","justifyContent","length","height","alignItems"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport Axios from \"axios\";\nimport { Icon, Col, Card, Row } from \"antd\";\nimport ImageSlider from \"../../utils/ImageSlider\";\nimport 'antd/dist/antd.css'\nimport RadioBox from \"./LandingPage/Selections/RadioBox\";\nimport CheckBox from \"./LandingPage/Selections/CheckBox\";\nimport {filterData} from \"./LandingPage/Sections/Datas\";\nimport SearchFeature from \"./LandingPage/Selections/SearchFeature\";\n\nconst { Meta } = Card;\n\nfunction LandingPage() {\n  const [Products, setProducts] = useState([]);\n  const [Skip, setSkip] = useState(0);\n  const [Limit, setLimit] = useState(8);\n  const [PostSize, setPostSize] = useState();\n  const [SearchTerms, setSearchTerms] = useState(\"\");\n\n  const [Filters, setFilters] = useState({\n    lengths: [],\n    locations: [],\n    services: [],\n    environments: [],\n    ratings: [],\n    shapes: [],\n    types: [],\n    enhancementExtensions: [],\n    nailArts: [],\n  });\n\n  useEffect(() => {\n    const variables = {\n      skip: Skip,\n      limit: Limit,\n    };\n\n    getProducts(variables);\n  }, []);\n\n  const getProducts = (variables) => {\n    Axios.post(\"/api/product/getProducts\", variables).then((response) => {\n      if (response.data.success) {\n        if (variables.loadMore) {\n          setProducts([...Products, ...response.data.products]);\n        } else {\n          setProducts(response.data.products);\n        }\n        setPostSize(response.data.postSize);\n      } else {\n        alert(\"Failed to fectch product datas\");\n      }\n    });\n  };\n\n  const onLoadMore = () => {\n    let skip = Skip + Limit;\n\n    const variables = {\n      skip: skip,\n      limit: Limit,\n      loadMore: true,\n      filters: Filters,\n      searchTerm: SearchTerms,\n    };\n    getProducts(variables);\n    setSkip(skip);\n  };\n\n  const renderCards = Products.map((product, index) => {\n    return (\n      <Col lg={6} md={8} xs={24}>\n        <Card\n          hoverable={true}\n          cover={\n            <a href={`/product/${product._id}`}>\n              {\" \"}\n              <ImageSlider images={product.images} />\n            </a>\n          }\n        >\n          <Meta title={product.title} description={`$${product.price}`} />\n        </Card>\n      </Col>\n    );\n  });\n\n  const showFilteredResults = (filters) => {\n    const variables = {\n      skip: 0,\n      limit: Limit,\n      filters: filters,\n    };\n    getProducts(variables);\n    setSkip(0);\n  };\n  const handleRadio = (value,category) => {\n    const data = filterData[category];\n    let array = [];\n\n    for (let key in data) {\n      if (data[key].id === parseInt(value, 10)) {\n        array = data[key].array;\n      }\n    }\n    console.log(\"array\", array);\n    return array;\n  };\n  const handleFilters = (filters, category, filterType) => {\n    const newFilters = { ...Filters };\n\n    newFilters[category] = filters;\n\n    if (filterType === \"RadioBox\") {\n      let priceValues = handleRadio(filters,category);\n      newFilters[category] = priceValues;\n    }\n\n    console.log(newFilters);\n\n    showFilteredResults(newFilters);\n    setFilters(newFilters);\n  };\n\n  const updateSearchTerms = (newSearchTerm) => {\n    const variables = {\n      skip: 0,\n      limit: Limit,\n      filters: Filters,\n      searchTerm: newSearchTerm,\n    };\n\n    setSkip(0);\n    setSearchTerms(newSearchTerm);\n\n    getProducts(variables);\n  };\n\n  return (\n    <div style={{ width: \"75%\", margin: \"3rem auto\" }}>\n      <div style={{ textAlign: \"center\" }}>\n        {/* <h2>  Let's Travel Anywhere  <Icon type=\"rocket\" />  </h2> */}\n      </div>\n\n      {/* Filter  */}\n      <Row gutter = {[16,16]}>\n      <Col lg={5} xs={10} >\n        <RadioBox\n        list = {filterData[\"services\"]} title = \"Service\" filterType = \"radioBox\"\n          handleFilters = {filters => handleFilters(filters, \"services\")}\n          />\n      </Col>\n      <Col lg={5} xs={10} >\n        <RadioBox\n        list = {filterData[\"locations\"]} title = \"Location\" filterType = \"radioBox\"\n          handleFilters = {filters => handleFilters(filters, \"locations\")}\n          />\n      </Col>\n      <Col lg={5} xs={10} >\n        <RadioBox\n        list = {filterData[\"environments\"]} title = \"Environment\" filterType = \"radioBox\"\n          handleFilters = {filters => handleFilters(filters, \"environments\")}\n          />\n      </Col>\n      </Row>\n\n      <Row gutter = {[16,16]}>\n      <Col lg={5} xs={10} >\n        <CheckBox \n        list = {filterData[\"lengths\"]} title = \"Length\" \n            handleFilters = {filters => handleFilters(filters, \"lengths\")}\n        />\n      </Col>\n      <Col lg={5} xs={10} >\n        <RadioBox\n        list = {filterData[\"shapes\"]} title = \"Shape\" filterType = \"radioBox\"\n          handleFilters = {filters => handleFilters(filters, \"shapes\")}\n          />\n      </Col>\n      <Col lg={5} xs={10}  >\n        <RadioBox\n        list = {filterData[\"types\"]} title = \"Types\" filterType = \"radioBox\"\n          handleFilters = {filters => handleFilters(filters, \"types\")}\n          />\n      </Col>\n      </Row>\n      \n      <Row gutter = {[16,16]}>\n      <Col lg={5} xs={10} >\n        <RadioBox filterType = \"radioBox\"\n        list = {filterData[\"enhancementExtensions\"]} title = \"Enhancement Extension\"\n          handleFilters = {filters => handleFilters(filters, \"enhancementExtension\")}\n          />\n      </Col>\n      <Col lg={5} xs={10} >\n        <RadioBox filterType = \"radioBox\"\n        list = {filterData[\"ratings\"]} title = \"Rating\"\n          handleFilters = {filters => handleFilters(filters, \"ratings\")}\n          />\n      </Col>\n      <Col lg={5} xs={10} >\n        <RadioBox filterType = \"radioBox\"\n        list = {filterData[\"nailArts\"]} title = \"Nail Art\"\n          handleFilters = {filters => handleFilters(filters, \"nailArts\")}\n          />\n      </Col>\n      </Row>\n\n      {/* Search  */}\n      <div\n        style={{\n          display: \"flex\",\n          justifyContent: \"flex-end\",\n          margin: \"1rem auto\",\n        }}\n      >\n        <SearchFeature refreshFunction={updateSearchTerms} />\n      </div>\n\n      {Products.length === 0 ? (\n        <div\n          style={{\n            display: \"flex\",\n            height: \"300px\",\n            justifyContent: \"center\",\n            alignItems: \"center\",\n          }}\n        >\n          <h2>No post yet...</h2>\n        </div>\n      ) : (\n        <div>\n          <Row gutter={[16, 16]}>{renderCards}</Row>\n        </div>\n      )}\n      <br />\n      <br />\n\n      {PostSize >= Limit && (\n        <div style={{ display: \"flex\", justifyContent: \"center\" }}>\n          <button onClick={onLoadMore}>Load More</button>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default LandingPage;\n\n// phase1 search box and filter open"]},"metadata":{},"sourceType":"module"}